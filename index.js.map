{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\n\nconst simplelightboxExempl = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'buttom',\n  captionDelay: 250,\n  overlayOpacity: 0.7,\n});\n\nexport function createMarkup(arr) {\n  const markupGallery = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img\n\t\t\tclass=\"gallery-image\"\n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\t/>\n\t</a>\n    <ul class=\"gallery-image-descr\">\n    <li>\n    <p class=\"image-descr-text\">Likes</p>\n    <p class=\"image-descr-number\">${likes}</p>\n    </li>\n    <li>\n    <p class=\"image-descr-text\">Views</p>\n    <p class=\"image-descr-number\">${views}</p>\n    </li>\n    <li>\n    <p class=\"image-descr-text\">Comments</p>\n    <p class=\"image-descr-number\">${comments}</p>\n    </li>\n    <li>\n    <p class=\"image-descr-text\">Downloads</p>\n    <p class=\"image-descr-number\">${downloads}</p>\n    </li>\n    </ul>\n</li>\n      `;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markupGallery);\n  simplelightboxExempl.refresh();\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '46912435-f669d0ff50839d2359d53ff0c';\n\nconst loader = document.querySelector('.loader');\n\nconst perPage = 15;\n\nexport async function serviseImage(query, page = 1) {\n  loader.style.display = 'block';\n  const { data } = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      leng: 'en',\n      page,\n      per_page: perPage,\n    },\n  }).finally(() => {\n    loader.style.display = 'none';\n  });\n\n  return data;\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createMarkup } from './js/render-functions';\nimport { serviseImage } from './js/pixabay-api';\nimport { gallery } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst endLoaderText = document.querySelector('.end-loader');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst loaderMore = document.querySelector('.loader-more');\n\nlet page = 1;\nconst perPage = 15;\nlet queryValue = '';\n\nloaderMore.style.display = 'none';\nloader.style.display = 'none';\nendLoaderText.style.display = 'none';\nbtnLoadMore.style.display = 'none';\n\nform.addEventListener('submit', onFormBtnClick);\nbtnLoadMore.addEventListener('click', onBtnLoadMoreClick);\n\nasync function onFormBtnClick(event) {\n  event.preventDefault();\n\n  page = 1;\n\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n  btnLoadMore.style.display = 'none';\n  endLoaderText.style.display = 'none';\n\n  queryValue = event.target.elements.query.value;\n\n  if (queryValue.trim() === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter the name of the image in the search field!',\n    });\n    loader.style.display = 'none';\n    return;\n  }\n  try {\n    const data = await serviseImage(queryValue, page);\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      loader.style.display = 'block';\n      createMarkup(data.hits);\n    }\n\n    if (data.totalHits > page * perPage) {\n      btnLoadMore.style.display = 'block';\n    } else {\n      btnLoadMore.style.display = 'none';\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Oops! Something went wrong. Try again.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n\n  form.reset();\n}\n\nasync function onBtnLoadMoreClick() {\n  page += 1;\n\n  try {\n    btnLoadMore.style.display = 'none';\n    loaderMore.style.display = 'block';\n\n    const data = await serviseImage(queryValue, page);\n    createMarkup(data.hits);\n\n    loaderMore.style.display = 'none';\n\n    if (data.totalHits > page * perPage) {\n      btnLoadMore.style.display = 'block';\n    } else {\n      btnLoadMore.style.display = 'none';\n\n      iziToast.info({\n        title: 'Hello',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n\n      endLoaderText.style.display = 'block';\n    }\n    const card = document.querySelector('.gallery-item');\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Oops! Something went wrong. Try again.',\n    });\n  } finally {\n    loaderMore.style.display = 'none';\n  }\n}\n"],"names":["gallery","simplelightboxExempl","SimpleLightbox","createMarkup","arr","markupGallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","BASE_URL","API_KEY","loader","perPage","serviseImage","query","page","data","axios","form","endLoaderText","btnLoadMore","loaderMore","queryValue","onFormBtnClick","onBtnLoadMoreClick","event","iziToast","cardHeight"],"mappings":"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"}